<<<<<<< HEAD
--- a/src/SyncClient.cpp
+++ b/src/SyncClient.cpp
@@ -256,6 +256,13 @@ static std::shared_ptr<grpc::Channel> create_grpc_channel(
     const grpc::ChannelArguments& grpc_args) {
   const std::string addresses =
       etcd::detail::strip_and_resolve_addresses(address);
+  // Check environment variable to disable strict URI validation
+  const char* disable_validation = std::getenv("ETCD_CPP_API_DISABLE_URI_VALIDATION");
+  if (disable_validation != nullptr && std::string(disable_validation) == "1") {
+    std::string final_address = addresses.empty() ? address : addresses;
+    return grpc::CreateCustomChannel(final_address, creds, grpc_args);
+  }
+  // Continue with normal validation
 #ifndef NDEBUG
   std::cerr << "[debug] resolved addresses: " << addresses << std::endl;
 #endif
=======
--- a/clientv3/client.go
+++ b/clientv3/client.go
@@ -244,7 +244,11 @@ func (c *Client) dialSetupOpts(creds grpccredentials.TransportCredentials, dopts
 		if url.Scheme == "unix" || url.Scheme == "unixs" {
 			// unix sockets don't have ports, so no need to dial
 			opts = append(opts, grpc.WithAuthority(url.Host))
-		} else {
+		} else if strings.Contains(url.Host, ":") {
+			// For proper IPv4/IPv6 addresses with ports
+			opts = append(opts, grpc.WithAuthority(url.Host))
+		} else {
+			// For hostnames without explicit ports
 			opts = append(opts, grpc.WithAuthority(url.Host+":"+url.Port()))
 		}
 	}
>>>>>>> main
